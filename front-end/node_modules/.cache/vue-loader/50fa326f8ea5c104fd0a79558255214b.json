{"remainingRequest":"D:\\demo\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\demo\\front-end\\src\\components\\commons\\filter-table.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\demo\\front-end\\src\\components\\commons\\filter-table.vue","mtime":1556937921672},{"path":"D:\\demo\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1556937905901},{"path":"D:\\demo\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1556937905542},{"path":"D:\\demo\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1556937905901},{"path":"D:\\demo\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1556937918662}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  props: {\r\n    headers: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n      required: true\r\n    },\r\n\r\n    data: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n      required: true\r\n    },\r\n\r\n    collums: {\r\n      type: Object,\r\n      default() {},\r\n      required: false\r\n    },\r\n\r\n    sort: {\r\n      type: String,\r\n      default: '',\r\n      required: false\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      date_menu: {},\r\n\r\n      search_val: {},\r\n\r\n      search_conditions: [],\r\n\r\n      pagination: {\r\n        descending: false,\r\n        sortBy: ''\r\n      },\r\n\r\n      data_source: []\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    sort() {\r\n      this.pagination.sortBy = this.sort;\r\n    },\r\n\r\n    data() {\r\n      this.data_source = this.data;\r\n    }\r\n  },\r\n\r\n  created() {\r\n    var index;\r\n    for (index = 0; index < this.headers.length; index++) {\r\n      var element = this.headers[index];\r\n      if (\r\n        element.type === 'string' ||\r\n        element.type === 'date' ||\r\n        element.type === 'number'\r\n      ) {\r\n        this.search_val[element.value] = {\r\n          value: '',\r\n          type: element.type\r\n        };\r\n      } else if (element.type === 'bool') {\r\n        this.search_val[element.value] = {\r\n          value: false,\r\n          type: element.type\r\n        };\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  methods: {\r\n    validData(type, srcVal, destVal) {\r\n      switch (type) {\r\n        case 'bool':\r\n          return srcVal == destVal;\r\n        case 'string':\r\n          return srcVal.toLowerCase().includes(destVal.toLowerCase());\r\n        case 'date':\r\n          return (\r\n            new Date(srcVal).toLocaleDateString() ==\r\n            new Date(destVal).toLocaleDateString()\r\n          );\r\n        case 'number':\r\n          return srcVal == destVal;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    isEmpty(search_val) {\r\n      switch (search_val.type) {\r\n        case 'bool':\r\n          return true;\r\n        case 'string':\r\n          return search_val.value === '';\r\n        case 'date':\r\n          return search_val.value === '';\r\n        case 'number':\r\n          return search_val.value == '';\r\n      }\r\n      return false;\r\n    },\r\n\r\n    searchByCol(col) {\r\n      if (this.data != undefined && this.data.length > 0) {\r\n        var index = this.search_conditions.indexOf(col);\r\n        if (this.isEmpty(this.search_val[col])) {\r\n          if (index > -1) {\r\n            this.search_conditions.splice(index, 1);\r\n          }\r\n        } else if (index == -1) {\r\n          this.search_conditions.push(col);\r\n        }\r\n        var result = [];\r\n\r\n        if (this.search_conditions.length == 0) {\r\n          this.data_source = this.data;\r\n          return;\r\n        }\r\n\r\n        for (var i = 0; i < this.data.length; i++) {\r\n          var flag = true;\r\n          var rowData = this.data[i];\r\n          for (var j = 0; j < this.search_conditions.length; j++) {\r\n            var col_name = this.search_conditions[j];\r\n            if (\r\n              !this.validData(\r\n                this.search_val[col_name].type,\r\n                rowData[col_name],\r\n                this.search_val[col_name].value\r\n              )\r\n            ) {\r\n              flag = false;\r\n            }\r\n          }\r\n          if (flag) {\r\n            result.push(this.data[i]);\r\n          }\r\n        }\r\n        this.data_source = result;\r\n      }\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["filter-table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"filter-table.vue","sourceRoot":"src/components/commons","sourcesContent":["<template>\r\n  <div id=\"abc\">\r\n    <v-data-table :headers=\"headers\" :items=\"data_source\">\r\n      <template slot=\"headers\" slot-scope=\"props\">\r\n        <tr class=\"text-uppercase\">\r\n          <th\r\n            v-for=\"header in props.headers\"\r\n            :key=\"header.text\"\r\n            :class=\"[\r\n              'column sortable',\r\n              pagination.descending ? 'desc' : 'asc',\r\n              header.value === pagination.sortBy ? 'active' : ''\r\n            ]\"\r\n          >\r\n            {{ header.text }}\r\n            <v-icon small>arrow_upward</v-icon>\r\n          </th>\r\n        </tr>\r\n        <tr class=\"search_header\">\r\n          <th v-for=\"header in props.headers\" :key=\"header.value\">\r\n            <v-text-field\r\n              v-if=\"header.type === 'string' || header.type === 'number'\"\r\n              v-model=\"search_val[header.value].value\"\r\n              @input=\"searchByCol(header.value)\"\r\n            />\r\n            <v-checkbox\r\n              v-else-if=\"header.type === 'bool'\"\r\n              v-model=\"search_val[header.value].value\"\r\n              @change=\"searchByCol(header.value)\"\r\n            />\r\n            <v-menu\r\n              v-else-if=\"header.type === 'date'\"\r\n              ref=\"${date_menu[header.value]}\"\r\n              v-model=\"date_menu[header.value]\"\r\n              :close-on-content-click=\"false\"\r\n              :nudge-right=\"40\"\r\n              lazy\r\n              transition=\"scale-transition\"\r\n              offset-y\r\n              full-width\r\n              min-width=\"290px\"\r\n            >\r\n              <v-text-field\r\n                slot=\"activator\"\r\n                v-model=\"search_val[header.value].value\"\r\n                readonly\r\n              />\r\n              <v-date-picker\r\n                v-model=\"search_val[header.value].value\"\r\n                no-title\r\n                color=\"#00695c\"\r\n                @input=\"\r\n                  date_menu[header.value] = false;\r\n                  searchByCol(header.value);\r\n                \"\r\n              >\r\n                <v-spacer />\r\n                <v-btn\r\n                  flat\r\n                  color=\"#00695c\"\r\n                  @click=\"\r\n                    date_menu[header.value] = false;\r\n                    search_val[header.value].value = '';\r\n                    searchByCol(header.value);\r\n                  \"\r\n                >\r\n                  Clear\r\n                </v-btn>\r\n              </v-date-picker>\r\n            </v-menu>\r\n          </th>\r\n        </tr>\r\n      </template>\r\n      <template slot=\"headerCell\" slot-scope=\"props\">\r\n        <v-tooltip bottom>\r\n          <span slot=\"activator\"> {{ props.header.text }} </span>\r\n          <span> {{ props.header.text }} </span>\r\n        </v-tooltip>\r\n      </template>\r\n      <template slot=\"items\" slot-scope=\"props\">\r\n        <slot :item=\"props.item\" name=\"tbody\" />\r\n      </template>\r\n    </v-data-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    headers: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n      required: true\r\n    },\r\n\r\n    data: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n      required: true\r\n    },\r\n\r\n    collums: {\r\n      type: Object,\r\n      default() {},\r\n      required: false\r\n    },\r\n\r\n    sort: {\r\n      type: String,\r\n      default: '',\r\n      required: false\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      date_menu: {},\r\n\r\n      search_val: {},\r\n\r\n      search_conditions: [],\r\n\r\n      pagination: {\r\n        descending: false,\r\n        sortBy: ''\r\n      },\r\n\r\n      data_source: []\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    sort() {\r\n      this.pagination.sortBy = this.sort;\r\n    },\r\n\r\n    data() {\r\n      this.data_source = this.data;\r\n    }\r\n  },\r\n\r\n  created() {\r\n    var index;\r\n    for (index = 0; index < this.headers.length; index++) {\r\n      var element = this.headers[index];\r\n      if (\r\n        element.type === 'string' ||\r\n        element.type === 'date' ||\r\n        element.type === 'number'\r\n      ) {\r\n        this.search_val[element.value] = {\r\n          value: '',\r\n          type: element.type\r\n        };\r\n      } else if (element.type === 'bool') {\r\n        this.search_val[element.value] = {\r\n          value: false,\r\n          type: element.type\r\n        };\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  methods: {\r\n    validData(type, srcVal, destVal) {\r\n      switch (type) {\r\n        case 'bool':\r\n          return srcVal == destVal;\r\n        case 'string':\r\n          return srcVal.toLowerCase().includes(destVal.toLowerCase());\r\n        case 'date':\r\n          return (\r\n            new Date(srcVal).toLocaleDateString() ==\r\n            new Date(destVal).toLocaleDateString()\r\n          );\r\n        case 'number':\r\n          return srcVal == destVal;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    isEmpty(search_val) {\r\n      switch (search_val.type) {\r\n        case 'bool':\r\n          return true;\r\n        case 'string':\r\n          return search_val.value === '';\r\n        case 'date':\r\n          return search_val.value === '';\r\n        case 'number':\r\n          return search_val.value == '';\r\n      }\r\n      return false;\r\n    },\r\n\r\n    searchByCol(col) {\r\n      if (this.data != undefined && this.data.length > 0) {\r\n        var index = this.search_conditions.indexOf(col);\r\n        if (this.isEmpty(this.search_val[col])) {\r\n          if (index > -1) {\r\n            this.search_conditions.splice(index, 1);\r\n          }\r\n        } else if (index == -1) {\r\n          this.search_conditions.push(col);\r\n        }\r\n        var result = [];\r\n\r\n        if (this.search_conditions.length == 0) {\r\n          this.data_source = this.data;\r\n          return;\r\n        }\r\n\r\n        for (var i = 0; i < this.data.length; i++) {\r\n          var flag = true;\r\n          var rowData = this.data[i];\r\n          for (var j = 0; j < this.search_conditions.length; j++) {\r\n            var col_name = this.search_conditions[j];\r\n            if (\r\n              !this.validData(\r\n                this.search_val[col_name].type,\r\n                rowData[col_name],\r\n                this.search_val[col_name].value\r\n              )\r\n            ) {\r\n              flag = false;\r\n            }\r\n          }\r\n          if (flag) {\r\n            result.push(this.data[i]);\r\n          }\r\n        }\r\n        this.data_source = result;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search_header .v-text-field {\r\n  font-weight: 400;\r\n  font-size: 13px;\r\n}\r\n</style>\r\n"]}]}